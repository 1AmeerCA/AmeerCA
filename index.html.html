<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pakistan Income Tax Calculator (Salaried & Business)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #f7fafc;
        }
        .container {
            max-width: 900px;
        }
        .text-primary { color: #165A2F; } /* AmeerCA Green */
        .bg-primary { background-color: #165A2F; }
        .bg-accent { background-color: #F5D48A; } /* AmeerCA Gold */

        /* Custom Input Styling */
        input[type="number"], select {
            border-color: #d1d5db;
            transition: border-color 0.2s, box-shadow 0.2s;
        }
        input[type="number"]:focus, select:focus {
            border-color: #165A2F;
            box-shadow: 0 0 0 3px rgba(22, 90, 47, 0.2);
        }
    </style>
</head>

<body class="p-4 sm:p-8">
    <div class="container mx-auto bg-white shadow-2xl rounded-xl overflow-hidden">
        
        <header class="bg-primary text-white p-6 sm:p-8 text-center">
            <h1 class="text-3xl sm:text-4xl font-extrabold flex items-center justify-center">
                <i class="fas fa-calculator mr-3 text-accent"></i>
                Pakistan Income Tax Calculator
            </h1>
            <p class="text-sm mt-2 opacity-80">For Tax Year 2024-2025 (Based on general FBR slabs)</p>
        </header>

        <div class="p-6 sm:p-10">

            <div class="mb-8">
                <label for="taxpayer-type" class="block text-lg font-semibold mb-2 text-primary">Taxpayer Status:</label>
                <select id="taxpayer-type" class="w-full p-3 border rounded-lg text-gray-700 font-medium bg-gray-50 focus:ring-2 focus:ring-primary" onchange="calculateTax()">
                    <option value="salaried">Salaried Individual</option>
                    <option value="business">Business Individual / AOP</option>
                </select>
            </div>

            <div class="space-y-6">
                
                <div>
                    <label for="annual-income" class="block text-base font-semibold mb-2 text-gray-700">Annual Taxable Income (Rs.):</label>
                    <input type="number" id="annual-income" placeholder="Enter income (e.g., 1,800,000)" class="w-full p-3 border rounded-lg text-gray-800" oninput="calculateTax()">
                </div>
                
                <div id="business-only-fields" class="space-y-6 hidden">
                    <h3 class="text-xl font-bold text-primary border-b pb-2">Business Inputs</h3>
                    <div>
                        <label for="advance-tax" class="block text-base font-semibold mb-2 text-gray-700">Advance Tax Paid / Withheld (Rs.):</label>
                        <input type="number" id="advance-tax" value="0" placeholder="Enter advance tax paid" class="w-full p-3 border rounded-lg text-gray-800" oninput="calculateTax()">
                    </div>
                </div>

                <div id="salaried-only-fields" class="space-y-6 hidden">
                    <h3 class="text-xl font-bold text-primary border-b pb-2">Salaried Inputs</h3>
                    <p class="text-sm text-gray-500 italic">Salaried individuals typically enjoy lower tax rates.</p>
                </div>
            </div>

            <button onclick="calculateTax()" class="hidden"></button>
            
            <div class="mt-10 p-6 sm:p-8 bg-gray-50 rounded-xl shadow-inner border-t-4 border-accent">
                <h2 class="text-2xl font-bold mb-4 text-primary flex items-center">
                    <i class="fas fa-file-invoice-dollar mr-3"></i>
                    Tax Calculation Summary
                </h2>
                
                <div class="space-y-3">
                    <div class="flex justify-between items-center border-b pb-2">
                        <span class="text-lg font-medium text-gray-700">Annual Taxable Income:</span>
                        <span id="display-income" class="text-lg font-semibold text-gray-800">Rs. 0</span>
                    </div>

                    <div class="flex justify-between items-center border-b pb-2">
                        <span class="text-lg font-medium text-gray-700">Tax Payable (Gross):</span>
                        <span id="tax-payable" class="text-xl font-bold text-red-600">Rs. 0</span>
                    </div>

                    <div class="flex justify-between items-center text-sm text-gray-600 italic">
                        <span>Less: Advance/Withholding Tax Paid:</span>
                        <span id="display-advance-tax" class="font-semibold">Rs. 0</span>
                    </div>

                    <div class="flex justify-between items-center pt-4 border-t border-primary">
                        <span class="text-xl font-bold text-gray-800">Tax Due / Refundable:</span>
                        <span id="net-tax" class="text-2xl font-extrabold text-primary">Rs. 0</span>
                    </div>
                    
                    <p id="net-tax-message" class="text-sm font-medium pt-2 text-center"></p>
                </div>
            </div>

            <div class="mt-8 text-xs text-gray-500 p-4 border rounded-lg bg-gray-50">
                <p><strong>Disclaimer:</strong> This calculator provides an *estimate* based on publicly available income tax slabs (for FY 2024-25). It does not include complexities like capital gains tax, minimum tax, fixed tax regimes, tax credits (e.g., investment, donations), or exemptions. Always consult with a Chartered Accountant (CA) or tax professional for definitive tax planning and filing advice.</p>
            </div>
        </div>
    </div>

    <script>
        // Tax Slabs (Rates are based on general FBR structure for clarity)
        // **Note: These rates are illustrative of the slab structure and may change annually.**
        const SLABS = {
            salaried: [
                { limit: 600000, rate: 0, base: 0 },         // Up to 600,000 is 0
                { limit: 1200000, rate: 0.05, base: 0 },    // 5% on amount exceeding 600,000
                { limit: 1800000, rate: 0.15, base: 30000 },// 15% on amount exceeding 1,200,000 + 30,000
                { limit: 2500000, rate: 0.20, base: 120000 },// 20% on amount exceeding 1,800,000 + 120,000
                { limit: 3500000, rate: 0.25, base: 260000 },// 25% on amount exceeding 2,500,000 + 260,000
                { limit: 5000000, rate: 0.30, base: 510000 },// 30% on amount exceeding 3,500,000 + 510,000
                { limit: Infinity, rate: 0.35, base: 960000 } // 35% on amount exceeding 5,000,000 + 960,000
            ],
            business: [
                { limit: 600000, rate: 0, base: 0 },         // Up to 600,000 is 0
                { limit: 1200000, rate: 0.05, base: 0 },    // 5% on amount exceeding 600,000
                { limit: 1800000, rate: 0.15, base: 30000 },// 15% on amount exceeding 1,200,000 + 30,000
                { limit: 2500000, rate: 0.20, base: 120000 },// 20% on amount exceeding 1,800,000 + 120,000
                { limit: 3500000, rate: 0.25, base: 260000 },// 25% on amount exceeding 2,500,000 + 260,000
                { limit: 5000000, rate: 0.30, base: 510000 },// 30% on amount exceeding 3,500,000 + 510,000
                { limit: 8000000, rate: 0.35, base: 960000 },// 35% on amount exceeding 5,000,000 + 960,000
                { limit: Infinity, rate: 0.40, base: 2010000 } // 40% on amount exceeding 8,000,000 + 2,010,000
            ]
        };

        // Utility to format number as currency
        const formatter = new Intl.NumberFormat('en-PK', {
            style: 'currency',
            currency: 'PKR',
            minimumFractionDigits: 0,
            maximumFractionDigits: 0,
        });

        function calculateTax() {
            const type = document.getElementById('taxpayer-type').value;
            const incomeInput = document.getElementById('annual-income').value;
            const advanceTaxInput = document.getElementById('advance-tax').value;

            // Show/Hide fields based on type
            const isBusiness = type === 'business';
            document.getElementById('business-only-fields').classList.toggle('hidden', !isBusiness);
            document.getElementById('salaried-only-fields').classList.toggle('hidden', isBusiness);
            
            const income = parseFloat(incomeInput) || 0;
            const advanceTax = isBusiness ? (parseFloat(advanceTaxInput) || 0) : 0;
            let taxPayable = 0;
            let netTax = 0;

            // Input Validation and early exit
            if (income <= 0) {
                taxPayable = 0;
                netTax = -advanceTax; // If income is 0, net tax is just the refundable advance tax
                updateDisplay(income, taxPayable, advanceTax, netTax);
                return;
            }

            const slabs = SLABS[type];
            let previousLimit = 0;
            
            // Calculate Tax based on slabs
            for (let i = 0; i < slabs.length; i++) {
                const slab = slabs[i];
                const limit = slab.limit;
                
                if (income > previousLimit) {
                    if (income <= limit) {
                        // Income falls within this slab
                        const taxableAmount = income - previousLimit;
                        taxPayable = slab.base + (taxableAmount * slab.rate);
                        break; // Calculation complete
                    } else {
                        // Income exceeds this slab, move to next
                        if (limit !== Infinity) {
                            taxPayable = slab.base + ((limit - previousLimit) * slab.rate);
                        }
                    }
                }
                previousLimit = limit;
            }

            // Calculate Net Tax Payable / Refundable
            netTax = taxPayable - advanceTax;

            // Update all display elements
            updateDisplay(income, taxPayable, advanceTax, netTax);
        }

        function updateDisplay(income, taxPayable, advanceTax, netTax) {
            document.getElementById('display-income').textContent = formatter.format(income);
            document.getElementById('tax-payable').textContent = formatter.format(Math.max(0, taxPayable));
            document.getElementById('display-advance-tax').textContent = formatter.format(advanceTax);
            document.getElementById('net-tax').textContent = formatter.format(netTax);

            const netTaxElement = document.getElementById('net-tax');
            const messageElement = document.getElementById('net-tax-message');
            
            netTaxElement.classList.remove('text-primary', 'text-red-600', 'text-green-600');
            messageElement.classList.remove('text-primary', 'text-red-600', 'text-green-600');

            if (netTax > 0) {
                // Tax Due
                netTaxElement.classList.add('text-red-600');
                messageElement.textContent = "You have a **NET TAX LIABILITY** due to the FBR.";
                messageElement.classList.add('text-red-600');
            } else if (netTax < 0) {
                // Refundable
                netTaxElement.classList.add('text-primary'); // Use primary color for positive outcome
                messageElement.textContent = "You have a **REFUNDABLE AMOUNT** from the FBR.";
                messageElement.classList.add('text-primary');
                document.getElementById('net-tax').textContent = formatter.format(Math.abs(netTax)); // Display absolute value for refund
            } else {
                // Zero
                netTaxElement.classList.add('text-gray-800');
                messageElement.textContent = "Your net tax due is **ZERO** based on your inputs.";
                messageElement.classList.add('text-gray-600');
            }
        }

        // Initial calculation on page load
        document.addEventListener('DOMContentLoaded', calculateTax);
    </script>
</body>
</html>